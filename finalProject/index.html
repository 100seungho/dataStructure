<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        /* simple CSS */
    </style>
    <title>지도를 그려보자</title>
</head>
<body>
    <!-- chart -->
    <div id="chart"></div>

    <!-- libraries -->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>

    <!-- d3 -->
    <script>
        /* References */
        // https://www.lucypark.kr/blog/2015/06/24/seoul-matzip-mapping/
        // https://github.com/southkorea/southkorea-maps

        /* 본문 */
        // 800*600 pixel의 svg
        var width = 800, height = 600;
        var svg = d3.select("#chart").append("svg")
            .attr("width", width)
            .attr("height", height);

        // svg 안에 만든 지도 레이어 `map`과 맛집 레이어 `places`
        var map = svg.append("g").attr("id", "map"),
            places = svg.append("g").attr("id", "places");

        // SouthKorea TopoJSON 파일을 사용해 map 레이어에 각 지역구에 대한 path와 지역명을 표시한 text요소 생성
        var projection = d3.geo.mercator()
            .center([126.9895, 37.5651])
            .scale(100000)
            .translate([width/2, height/2]);
 
        var path = d3.geo.path().projection(projection);
        
        d3.json("skorea-municipalities-topo.json", function(error, data) {
        var features = topojson.feature(data, data.objects.seoul_municipalities_geo).features;
        
        map.selectAll("path")
            .data(features)
            .enter().append("path")
            .attr("class", function(d) { console.log(); return "municipality c" + d.properties.code })
            .attr("d", path);
        
        map.selectAll("text")
            .data(features)
            .enter().append("text")
            .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
            .attr("dy", ".35em")
            .attr("class", "municipality-label")
            .text(function(d) { return d.properties.name; })
        });
    </script>
</body>
</html>